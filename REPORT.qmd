---
title: "How does commuting behavior vary across different socio-demographic characteristics, income levels, and infrastructural factors in France?"
author: "Mathilde VALLAT, Yesmine HACHANA"
format: pdf
editor: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
# Load knitr package
library(knitr)

# Set global chunk options
knitr::opts_chunk$set(
  echo = FALSE,    # Hide all code
  message = FALSE, # Suppress messages
  warning = FALSE  # Suppress warnings
)
```

[Link to the github
project](https://github.com/jemappelleyesmine/final_project)

# Introduction

As our modern societies have increased the distance between home and
workplace for most, commuting has become part of our daily routine. It
influences a countries energy use, urban development, and environmental
sustainability. In France, transportation accounts for a significant
share of national greenhouse gas (GHG) emissions (in 2021, transport
emissions amount to 126.0 Mt CO2 eq, equivalent to 30% of the national
total, source 1), with private vehicles being a major contributor (53%
in 2021, i.e. 66.4 Mt CO2 eq., source 1). Shifting commuters from
high-carbon modes like cars to lower-carbon options like public
transport, cycling, or walking is essential for meeting climate goals
such as those outlined in the Paris Agreement. France has committed to
reducing its carbon footprint, and understanding commuter behavior is
vital for designing effective policies to encourage sustainable
transportation choices. Beyond climate change, transport choices affect
both public health (e.g., air quality, physical activity) and quality of
life (e.g., time spent commuting, stress levels). Such that aligning
commuter preferences with sustainable goals can create co-benefits, such
as improved urban mobility, reduced traffic congestion, and healthier
lifestyles.

We are interested in this topic because commuting behavior reflects the
complex interplay of socio-economic realities, urban design, and
environmental priorities, shaping both our daily lives and the future of
our planet. Understanding commuting behavior can help policymakers
design targeted interventions that promote sustainable and equitable
transport systems. For society, this research supports efforts to reduce
emissions, improve public health, and ensure accessible mobility for
all, while contributing valuable insights to the academic study of
transport behavior, particularly within the French context.

# Research question

Our research question explores how commuting behavior varies across
different socio-economic, geographic, and infrastructural factors in
France. This project aims to identify patterns and differences in
commuting choices based on key factors, such as urbanization, income,
population density, commuting distance, and accessibility to
transportation infrastructure, using large publicly available datasets
with varying levels of aggregation. By cleaning, harmonizing, and
analyzing these datasets, we will summarize variables and visualize
relationships to better understand how these factors correlate with
commuting behavior. While this study does not attempt to infer causal
relationships, it seeks to produce clear visualizations and highlight
meaningful patterns that can inform policymakers and contribute to
ongoing research on transportation behavior in France.

Here are some factors that might influence commuting behavior and the
associated variables that we have thought of:

-   **Socio-demographic factors**: age, gender, educational attainment
    and socio-professional category
-   **Income levels**: median living standard
-   **Infrastructures and urban/rural areas**: proximity to transport
    infrastructure and population density
-   **Commuting distances**: commuting destinations
-   **Car ownership**: share of houselholds owning a car

Our project involves several steps: firstly, we collect, store, and
organize datasets in a GitHub repository. Since datasets are aggregated
at varying levels (e.g., “commune” vs. “intercommunal” and with
"lon/lat"), we then have to harmonize these differences using data
management methods seen in class. In parallel, we look for missing or
inconsistent data that may complicate our data analysis. After this, we
start initial data exploration, summarize variables using R and
ultimately generate visualizations to identify patterns.

# Datasets

Our analysis leverages multiple datasets from various reliable sources,
providing a comprehensive view of commuting behavior in France. From
INSEE's "Statistiques Locales" platform, we use demographic data on
population and density, income levels, and commuting patterns,
aggregated at intercommunal or municipal levels. These datasets offer
insights into variables such as population density, median income, car
ownership, and the use of different transport modes. Additionally, an
experimental dataset from transport.data.gouv.fr provides geolocated
information on public transport stops, enriching our understanding of
infrastructure accessibility. Further, the INSEE NAV2B dataset from the
2017 census highlights transport choices by employed individuals aged 15
and above, disaggregated by gender and geography. Lastly, the 2024
professional mobility dataset offers granular data on commuting
patterns, household vehicle ownership, and education levels, linking
residence and workplace at the municipal level. These diverse datasets,
despite differing levels of aggregation, collectively form the
foundation for our exploration of commuting behavior in France.

```{r}
library(vroom)
library(here)
here::i_am("Final_Project_Commuter_behavior.Rproj")

source <- "https://www.data.gouv.fr/fr/datasets/r/69cf54c6-6591-4920-b1d6-2a5292964606"
local_name <- "stops_france.csv.gz"
local_dir <- "data"
## is the directory available?
if (!dir.exists(here(local_dir))) {
  ## create the directory if needed
  dir.create(here(local_dir))
}
## is the file available?
if (!file.exists(here(local_dir, local_name))) {
  ## we need to download it
  stops_france <- vroom(source)
  ## let's save the file to avoid useless downloading
  vroom_write(stops_france, here(local_dir, local_name), delim = ",")
} else {
  ## we need only to load it
  stops_france <- vroom(here(local_dir, local_name))
}
```

```{r}
#Loading mob_pro
library(zip)
# Define variables
source <- "https://www.insee.fr/fr/statistiques/fichier/8205896/RP2021_mobpro.zip"
local_name <- "RP2021_mobpro.zip"
local_dir <- "data"
csv1_name <- "FD_MOBPRO_2021.csv"
csv2_name <- "varmod_mobpro_2021.csv"
# Check if the directory exists, create if not
if (!dir.exists(here(local_dir))) {
  dir.create(here(local_dir))
}
# Check if the ZIP file exists locally
if (!file.exists(here(local_dir, local_name))) {
  # Download the ZIP file
  download.file(source, destfile = here(local_dir, local_name), mode = "wb")
}
# Unzip the file
unzip(here(local_dir, local_name), exdir = here(local_dir))
# Load the first CSV file
mob_pro <- vroom(here(local_dir, csv1_name))
# Load the second CSV file
var_mob_pro <- vroom(here(local_dir, csv2_name))
```

```{r}
#Loading iltduu_sexe_trans

# Define variables
source <- "https://www.insee.fr/fr/statistiques/fichier/4515510/BTT_TD_NAV2B_2017.zip"
local_name <- "BTT_TD_NAV2B_2017.zip"
local_dir <- "data"
csv_name <- "BTT_TD_NAV2B_2017.CSV"
# Check if the directory exists, create it if not
if (!dir.exists(here(local_dir))) {
  dir.create(here(local_dir))
}
# Check if the ZIP file exists locally
if (!file.exists(here(local_dir, local_name))) {
  # Download the ZIP file
  download.file(source, destfile = here(local_dir, local_name), mode = "wb")
}
# Unzip the file
unzip(here(local_dir, local_name), exdir = here(local_dir))
# Load the specified CSV file
iltduu_sexe_trans <- vroom(here(local_dir, csv_name))
```

```{r}
#Loading the local files
demo <- vroom(here("data", "INSEE_Statistiques_locales_demographie.csv"))
revenus <- vroom(here("data","INSEE_Statistiques_locales_menages_fiscaux_niveau_de_vie.csv"))
local_mob <- vroom(here("data","INSEE_Statistiques_locales_territoires_ville_quartiers.csv"))
```

**Summary Table**

```{r echo = FALSE, results='asis'}
# Load required libraries
library(tibble)
library(knitr)

# Define datasets
datasets <- list(
  iltduu_sexe_trans = iltduu_sexe_trans,
  stops_france = stops_france,
  mob_pro = mob_pro,
  var_mob_pro = var_mob_pro,
  revenus = revenus,
  demo = demo,
  local_mob = local_mob
)

  
  # Create a summary table for all datasets
summary_table <- do.call(rbind, lapply(names(datasets), function(name) {
  data <- datasets[[name]]
  tibble(
    Dataset = name,
    `Number of Rows` = nrow(data),
    `Number of Columns` = ncol(data)
  )
}))

 # Print a heading and the table in LaTeX format
print(knitr::kable(summary_table, format = "pipe"))

  
```

# Data Analysis

The data analysis aims to uncover patterns in commuting behavior across
France by exploring socio-demographic, economic, geographic, and
infrastructural variables. By systematically examining these factors, we
seek to identify trends and relationships that shape commuting choices.

## Socio-demographic factors

Hypothesis:

-   Younger individuals are more likely to use active modes of transport
    (e.g., cycling, walking) or public transport, while older
    individuals may prefer private vehicles.

-   Men may have a higher likelihood of using private vehicles or
    motorized two-wheelers, whereas women may rely more on public
    transport.

-   Higher educational attainment correlates with increased use of
    sustainable transport modes due to environmental awareness.

-   Socio-professional categories determine affordability and
    accessibility: higher-income professionals may prefer private
    vehicles, while workers in intermediate or lower categories might
    rely on public transport.

### Age

### Gender

### Educational attainment

### Socio-professional category

## Income levels

Living standard

Hypothesis:

-   Wealthier households may prioritize comfort and convenience, opting
    for private cars or motorized transport.

-   Lower-income individuals may prefer public transport or walking due
    to affordability constraints.

## Infrastructures and urban/rural areas

Using density as a proxy for urban/rural indicator proximity to
transport infrastructure and population density

Hypothesis:
Proximity to transport infrastructure and population density affect the
accessibility and practicality of transport modes.

-   Urban residents (higher density areas) are more likely to use public
    transport or active transport due to better availability of
    infrastructure and shorter travel distances.

-   Rural residents (lower density areas) are more dependent on private
    vehicles due to limited access to public transport options.

### Infrastructures

### Uban/rural areas

## Commuting distances

commuting destinations

**Hypothesis:**\
Commuting distances determine the feasibility of transport modes.

-   Shorter distances are associated with active modes (walking,
    cycling), while longer distances are more likely to necessitate the
    use of private vehicles or public transport.

-   Very long commutes may encourage reliance on private cars or trains,
    depending on infrastructure availability.

## Car ownership

share of houselholds owning a car

**Hypothesis:**\
Car ownership directly influences the likelihood of using private
vehicles for commuting.

-   Households with cars are more likely to rely on them for commuting,
    especially in areas with limited public transport options.

-   Households without cars are more likely to depend on public
    transport, walking, or cycling for their commuting needs.

# Discussion

-   Mention that some factors probably matter more than others. - use
    qui 2 test?
-   Would also be interesting to perform a causal analysis. However, we
    cannot account for all confounding variables.
-   Modeling to predict commuting behavior based on these variables.
-   Eventually try to measure the impact of remote working on commute
    behavior (compare pre and post covid data)

https://hbr.org/2019/12/why-its-so-hard-to-change-peoples-commuting-behavior

# Conclusion

# Sources

1.  https://www.statistiques.developpement-durable.gouv.fr/edition-numerique/chiffres-cles-transports-2023/20-emissions-de-gaz-a-effet#:\~:text=Les%20%C3%A9missions%20des%20transports%20a%C3%A9riens%20sont%20ainsi%20deux%20fois%20moins,de%20GES%20de%20la%20France.

2.  https://statistiques-locales.insee.fr/#view=map1&c=indicator
